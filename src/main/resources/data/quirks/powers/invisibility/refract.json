{
   "name": "Warp Refraction",
   "description": "Draw in the light nearby, refracting it in a small radius near you and blinding nearby people.",
   "type": "origins:active_self",
   "entity_action": {
      "type": "origins:and",
      "actions": [
         {
            "type": "origins:apply_effect",
            "effect": {
               "effect": "minecraft:levitation",
               "amplifier": 4,
               "duration": 10,
               "is_ambient": true,
               "show_icon": false,
               "show_particles": false
            }
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:apply_effect",
               "effect": {
                  "effect": "minecraft:levitation",
                  "amplifier": 255,
                  "duration": 12,
                  "is_ambient": true,
                  "show_icon": false,
                  "show_particles": false
               }
            },
            "ticks": 9
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:play_sound",
               "sound": "minecraft:quirks:invisibility_combat",
               "volume": 1.00,
               "pitch": 1.00
            },
            "ticks": 11
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:execute_command",
               "command": "execute as @s positioned ~ ~1 ~ run function quirks:invisibility/warp_refraction"
            },
            "ticks": 12
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:execute_command",
               "command": "particle minecraft:flash ~ ~ ~ 0 0 0 0 2 normal"
            },
            "ticks": 13
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:area_of_effect",
               "radius": 4,
               "shape": "sphere",
               "bientity_action": {
                  "type": "origins:if_else",
                  "condition": {
                     "type": "origins:target_condition",
                     "condition": {
                        "type": "origins:daytime"
                     }
                  },
                  "if_action": {
                     "type": "origins:and",
                     "actions": [
                        {
                           "type": "origins:target_action",
                           "action": {
                              "type": "origins:apply_effect",
                              "effect": {
                                 "effect": "quirks:blinded",
                                 "duration": 100,
                                 "amplifier": 0,
                                 "is_ambient": false,
                                 "show_particles": false,
                                 "show_icon": true
                              }
                           }
                        },
                        {
                           "type": "origins:damage",
                           "amount": 16,
                           "source": {
                              "name": "invisday.player",
                              "unblockable": true
                           }
                        }
                     ]
                  },
                  "else_action": {
                     "type": "origins:and",
                     "actions": [
                        {
                           "type": "origins:target_action",
                           "action": {
                              "type": "origins:apply_effect",
                              "effect": {
                                 "effect": "quirks:blinded",
                                 "duration": 100,
                                 "amplifier": 0,
                                 "is_ambient": false,
                                 "show_particles": false,
                                 "show_icon": true
                              }
                           }
                        },
                        {
                           "type": "origins:damage",
                           "amount": 12,
                           "source": {
                              "name": "invisnight.player",
                              "unblockable": true
                           }
                        }
                     ]
                  }
               }
            },
            "ticks": 13
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:and",
               "actions": [
                  {
                     "type": "origins:clear_effect",
                     "effect": "minecraft:levitation"
                  },
                  {
                     "type": "origins:execute_command",
                     "command": "tp @s ~ ~ ~"
                  }
               ]
            },
            "ticks": 15
         },
         {
            "type": "origins:delay",
            "action": {
               "type": "origins:set_fall_distance",
               "fall_distance": 0
            },
            "ticks": 16
         }
      ]
   },
   "cooldown": 260,
   "hud_render": {
      "should_render": true,
      "sprite_location": "quirks:textures/gui/sprites/invisibility/resource_bar_01.png",
      "bar_index": 2
   },
   "key": {
      "key": "key.quirks.secondary",
      "continuous": false
   },
   "condition": {
      "type": "origins:and",
      "conditions": [
         {
            "type": "origins:power_active",
            "power": "quirks:invisibility/stealth_toggle"
         },
         {
            "type": "origins:resource",
            "resource": "quirks:universal/quirk_erased",
            "comparison": "==",
            "compare_to": 0
         }
      ]
   }
}